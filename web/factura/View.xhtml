<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui">

    <ui:composition>
        <p:dialog id="FacturaViewDlg" widgetVar="FacturaViewDialog" modal="true" resizable="false" appendTo="@(body)" header="#{bundlefactura.ViewFacturaTitle}" >
            <h:form id="FacturaViewForm">
                <h:panelGroup id="display">
                    <p:panelGrid columns="1" rendered="#{facturaController.selected != null}" >
                        <p:fieldset  legend="Datos de FacturaciÃ³n"  >
                            <p:panelGrid columns="2" style="width: 600px" styleClass="ui-custompanelgrid1">
                                <h:outputText style="float:right" value="#{bundlefactura.ViewFacturaLabel_numerofact}" styleClass="text-ouputnormal" />
                                <h:outputText value="#{facturaController.selected.numerofact}" title="#{bundlefactura.ViewFacturaTitle_numerofact}" styleClass="text-ouputfact">
                                    <f:convertNumber pattern="00000000" type="number"/>
                                </h:outputText>                            
                                <h:outputText style="float:right" value="#{bundlefactura.ViewFacturaLabel_numerocontrol}" styleClass="text-ouputnormal"/>
                                <h:outputText value="#{facturaController.selected.numerocontrol}" title="#{bundlefactura.ViewFacturaTitle_numerocontrol}"/>
                                <h:outputText style="float:right" value="#{bundlefactura.ViewFacturaLabel_idestatusfacturaventa}" styleClass="text-ouputnormal"/>
                                <h:outputText value="#{facturaController.selected.idestatusfacturaventa.estatusfacturaventa}" title="#{bundlefactura.ViewFacturaTitle_idestatusfacturaventa}"/>
                                <h:outputText style="float:right" value="#{bundlefactura.ViewFacturaLabel_idestatuscontable}" styleClass="text-ouputnormal"/>
                                <h:outputText value="#{facturaController.selected.idestatuscontable.estatuscontable}" title="#{bundlefactura.ViewFacturaTitle_idestatuscontable}"/>                        
                                <h:outputText style="float:right" value="#{bundlefactura.ViewFacturaLabel_idcaja}" styleClass="text-ouputnormal"/>
                                <h:outputText value="#{facturaController.selected.idcaja}" title="#{bundlefactura.ViewFacturaTitle_idcaja}"/>
                                <h:outputText style="float:right" value="#{bundlefactura.ViewFacturaLabel_idusuario}" styleClass="text-ouputnormal"/>
                                <h:outputText value="#{facturaController.selected.idusuario.nombre}" title="#{bundlefactura.ViewFacturaTitle_idusuario}"/>
                                <h:outputText style="float:right" value="#{bundlefactura.ViewFacturaLabel_fecha}" styleClass="text-ouputnormal"/>
                                <h:outputText value="#{facturaController.selected.fecha}" title="#{bundlefactura.ViewFacturaTitle_fecha}">
                                    <f:convertDateTime pattern="dd/MM/yyyy" />
                                </h:outputText>
                                <h:outputText style="float:right" value="#{bundlefactura.ViewFacturaLabel_hora}" styleClass="text-ouputnormal"/>
                                <h:outputText value="#{facturaController.selected.hora}" title="#{bundlefactura.ViewFacturaTitle_hora}"/>
                                <h:outputText style="float:right" value="#{bundlefactura.ViewFacturaLabel_rifcliente}" styleClass="text-ouputnormal"/>
                                <h:outputText value="#{facturaController.selected.rifcliente}" title="#{bundlefactura.ViewFacturaTitle_rifcliente}"/>
                                <h:outputText style="float:right" value="#{bundlefactura.ViewFacturaLabel_razonsocial}" styleClass="text-ouputnormal"/>
                                <h:outputText value="#{facturaController.selected.rifcliente.razonsocial}" title="#{bundlefactura.ViewFacturaTitle_rifcliente}"/>
                                <h:outputText style="float:right"  value="#{bundlefactura.ViewFacturaLabel_observacionesfact}" styleClass="text-ouputnormal"/>
                                <h:outputText style="width: 150px" value="#{facturaController.selected.observacionesfact}" title="#{bundlefactura.ViewFacturaTitle_observacionesfact}"/>
                            </p:panelGrid>
                            <p:panelGrid id="saldos" style="width: 600px" columns="10" styleClass="ui-custompanelgrid2">
                                <h:outputText/>
                                <h:outputText/>                                
                                <h:outputText/>
                                <h:outputText/>                                
                                <h:outputText/>
                                <h:outputText/>                                
                                <h:outputText/>
                                <h:outputText/>                                
                                <h:outputText style="float:right" value="#{bundlefactura.ViewFacturaLabel_bimponiblefact}" styleClass="text-ouput" />
                                <h:outputText style="float:right" value="#{facturaController.selected.bimponiblefact}" title="#{bundlefactura.ViewFacturaTitle_bimponiblefact}">
                                    <f:convertNumber type="currency" currencySymbol=" " />
                                </h:outputText>  
                                <h:outputText/>
                                <h:outputText/>                                
                                <h:outputText/>
                                <h:outputText/>                                
                                <h:outputText/>
                                <h:outputText/>                                
                                <h:outputText/>
                                <h:outputText/>                                
                                <h:outputText style="float:right" value="#{bundlefactura.ViewFacturaLabel_ivafact}" styleClass="text-ouput"/>
                                <h:outputText style="float:right" value="#{facturaController.selected.ivafact}" title="#{bundlefactura.ViewFacturaTitle_ivafact}">
                                    <f:convertNumber type="currency" currencySymbol=" " />
                                </h:outputText>  
                                <h:outputText/>
                                <h:outputText/>                                
                                <h:outputText/>
                                <h:outputText/>                                
                                <h:outputText/>
                                <h:outputText/>                                
                                <h:outputText/>
                                <h:outputText/>                                
                                <h:outputText style="float:right" value="#{bundlefactura.ViewFacturaLabel_totalgeneral}" styleClass="text-ouput"/>
                                <h:outputText style="float:right" value=" #{facturaController.selected.totalgeneral}" title="#{bundlefactura.ViewFacturaTitle_totalgeneral}">
                                    <f:convertNumber type="currency" currencySymbol=" " />
                                </h:outputText>        
                            </p:panelGrid>

                        </p:fieldset>
                        <p:fieldset legend="Articulos Facturados">
                        <!--p:panel id="paneldetalle" header="#{bundlefactura.ListDetallefacturaTitleView}"-->
                            <p:dataTable id="datalistfactu" value="#{facturaController.buscardetallesporfactura(facturaController.selected)}" var="item"
                                         rowKey="#{item.iddetallefact}"
                                         >
                                <!--p:column style="text-align: center">
                                    <f:facet name="header">
                                        <h:outputText value=".{bundlefactura.ListDetallefacturaTitle_iddetallefact}"/>
                                    </f:facet>
                                    <h:outputText value=".{item.iddetallefact}"/>
                                </p:column-->
                                <p:column style="text-align: center" >
                                    <f:facet name="header">
                                        <h:outputText value="#{bundlefactura.ListDetallefacturaTitle_numerofact}"/>
                                    </f:facet>
                                    <h:outputText value="#{item.numerofact.numerofact}">
                                        <f:convertNumber pattern="00000" type="number"/>
                                    </h:outputText>
                                </p:column>
                                <p:column style="text-align: center" >
                                    <f:facet name="header">
                                        <h:outputText value="#{bundlefactura.ListDetallefacturaTitle_codigo}"/>
                                    </f:facet>
                                    <h:outputText value="#{item.codigo.idarticulo}"/>
                                </p:column>

                                <p:column width="300" >
                                    <f:facet name="header">
                                        <h:outputText value="#{bundlefactura.ListDetallefacturaTitle_articulo}"/>
                                    </f:facet>
                                    <h:outputText value="#{item.codigo.descripcion}"/>
                                </p:column>
                                <p:column style="text-align: center">
                                    <f:facet name="header">
                                        <h:outputText value="#{bundlefactura.ListDetallefacturaTitle_unidades}"/>
                                    </f:facet>
                                    <h:outputText value="#{item.unidades}"/>
                                </p:column>
                                <p:column style="text-align:right">
                                    <f:facet name="header">
                                        <h:outputText value="#{bundlefactura.ListDetallefacturaTitle_preciocosto}"/>
                                    </f:facet>
                                    <h:outputText value="#{item.precioventa}">
                                        <f:convertNumber type="currency" currencySymbol=" " />
                                    </h:outputText>                                
                                </p:column>
                                <p:column style="text-align:right">
                                    <f:facet name="header">
                                        <h:outputText value="#{bundlefactura.ListDetallefacturaTitle_precioventabruto}"/>
                                    </f:facet>
                                    <h:outputText value="#{item.subtotal}">
                                        <f:convertNumber type="currency" currencySymbol=" " />
                                    </h:outputText>
                                </p:column>
                                <p:column style="text-align:right">
                                    <f:facet name="header">
                                        <h:outputText value="#{bundlefactura.ListDetallefacturaTitle_descuento}"/>
                                    </f:facet>
                                    <h:outputText value="#{item.tributoiva}">
                                        <f:convertNumber type="currency" currencySymbol=" " />
                                    </h:outputText>                                    
                                </p:column>
                                <p:column  style="text-align:right">
                                    <f:facet name="header">
                                        <h:outputText value="#{bundlefactura.ListDetallefacturaTitle_precioventaneta}"/>
                                    </f:facet>
                                    <h:outputText value="#{item.total}">
                                        <f:convertNumber type="currency" currencySymbol=" " />
                                    </h:outputText>
                                </p:column>
                            </p:dataTable>
                        </p:fieldset>
                        <!--/p:panel-->
                        <h1> Transacciones efectuadas sobre esta Factura </h1>
                        <!--p:panel header="#{bundlecobro.ListCobroventaTitle_abonos}"-->

                        <p:dataTable id="datalist" value="#{cobroventaController.cobrosFiltrados(facturaController.selected.numerofact)}" var="item"
                                     paginator="false"
                                     rowKey="#{item.idcobroventa}"
                                     >

                            <p:column style="text-align: center" width="80" >
                                <f:facet name="header">
                                    <h:outputText value="#{bundlecobro.ListCobroventaTitle_idcobroventa}"/>
                                </f:facet>
                                <h:outputText value="COB-#{item.idcobroventa}"/>
                            </p:column>
                            <p:column style="text-align: center" width="80" >
                                <f:facet name="header">
                                    <h:outputText value="#{bundlecobro.ListCobroventaTitle_numerofact}"/>
                                </f:facet>
                                <h:outputText value="#{item.numerofact.numerofact}">
                                    <f:convertNumber pattern="00000" type="number"/>
                                </h:outputText>

                            </p:column> 
                            <p:column width="180" >
                                <f:facet name="header">
                                    <h:outputText value="#{bundlecobro.ListCobroventaTitle_cliente}"/>
                                </f:facet>
                                <h:outputText value="#{item.numerofact.rifcliente.razonsocial}"/>
                            </p:column>                        
                            <p:column style="text-align: center" >
                                <f:facet name="header">
                                    <h:outputText value="#{bundlecobro.ListCobroventaTitle_fechacobro}"/>
                                </f:facet>
                                <h:outputText value="#{item.fechacobro}">
                                    <f:convertDateTime pattern="dd/MM/yyyy" />
                                </h:outputText>
                            </p:column>

                            <p:column style="text-align: right" width="80" styleClass="facturaabonadaporcobrar">
                                <f:facet name="header">
                                    <h:outputText value="#{bundlecobro.ListCobroventaTitle_montocobrado}"/>
                                </f:facet>
                                <h:outputText value="#{item.montocobrado}">
                                    <f:convertNumber type="currency" currencySymbol=" " />
                                </h:outputText>
                            </p:column>
                            <p:column style="text-align: right" width="80" >
                                <f:facet name="header">
                                    <h:outputText value="#{bundlecobro.ListCobroventaTitle_montoretenido}"/>
                                </f:facet>
                                <h:outputText value="#{item.montoretenido}">
                                    <f:convertNumber type="currency" currencySymbol=" " />
                                </h:outputText>
                            </p:column>
                            <p:column style="text-align: right"  styleClass="facturaabonadaporcobrar" >
                                <f:facet name="header">
                                    <h:outputText value="#{bundlecobro.ListCobroventaTitle_montopendiente}"/>
                                </f:facet>
                                <h:outputText value="#{item.montopendiente}">
                                    <f:convertNumber type="currency" currencySymbol=" " />
                                </h:outputText>
                            </p:column>
                            <p:column style="text-align: center"  >
                                <f:facet name="header">
                                    <h:outputText value="#{bundlecobro.ListCobroventaTitle_banco}"/>
                                </f:facet>
                                <h:outputText value="#{item.idcuentabancaria.idbanco.nombrebanco}"/>
                            </p:column>
                            <p:column style="text-align: center" width="100">
                                <f:facet name="header">
                                    <h:outputText value="#{bundlecobro.ListCobroventaTitle_idtipopago}"/>
                                </f:facet>
                                <h:outputText value="#{item.idtipopago.tipopago}"/>
                            </p:column>
                            <p:column style="text-align: center" width="190">
                                <f:facet name="header">
                                    <h:outputText value="#{bundlecobro.ListCobroventaTitle_idcuentabancaria}"/>
                                </f:facet>
                                <h:outputText value="#{item.idcuentabancaria.numerocuenta}"/>
                            </p:column>
                            <p:column>
                                <f:facet name="header">
                                    <h:outputText value="#{bundlecobro.ListCobroventaTitle_idestatuscontable}"/>
                                </f:facet>
                                <h:outputText value="#{item.idestatuscontable.estatuscontable}"/>
                            </p:column>
                        </p:dataTable>
                        <!--/p:panel-->
                        <p:commandButton value="#{bundlefactura.Close}" onclick="FacturaViewDialog.hide()"/>
                    </p:panelGrid>
                </h:panelGroup>
            </h:form>
        </p:dialog>

    </ui:composition>
</html>
